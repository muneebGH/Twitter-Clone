<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />

    <meta lang="en" />
    <title>Profile</title>

    <link
      href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      rel="stylesheet"
      id="bootstrap-css"
    />



    <link
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
      rel="stylesheet"
      integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN"
      crossorigin="anonymous"
    />

    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
      integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
      integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
      crossorigin="anonymous"
    ></script>





    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->


    <nav class="navbar navbar-light bg-white">
      <a href="#" class="navbar-brand">Twitter clone</a>

      <form class="form-inline">
        <div class="input-group">
          <input
            type="text"
            class="form-control"
            id="searchID"
            placeholder="Recipient's username"
            aria-describedby="button-addon2"
          />
          <div class="input-group-append">
            <button
              class="btn btn-outline-primary"
              type="button"
              id="button-addon2"
              onclick="search()"
            >
              <i class="fa fa-search"></i>
            </button>
          </div>
        </div>
      </form>
      <div class=" my-2 my-lg-0">
      <button type="button" id="chatButtonID" onclick="chat()" class="btn btn-success">Chat</button>
      <button type="button" onclick="home()" class="btn btn-primary">Home</button>
      <button type="button" onclick="logout()" class="btn btn-warning">Log Out</button>
    </div>
    </nav>

<div id="commentsModal"></div>
<div id="retweetsModal"></div>

    <div class="container-fluid gedf-wrapper">
      <div class="row">
        <div class="col-md-3">
          <div class="card">
            <div class="card-body">
              <div class="h5" id="userNameHtml">@sajjad</div>

              <div class="h7 text-muted" id="fullNameHtml">Fullname :Sajjad hussain shah</div>
              <div class="h7" id="accDescHtml">@
                Developer of web applications, JavaScript, PHP, Java, Python,
                Ruby, Java, Node.js, etc.
              </div>
            </div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">
                <div class="h6 text-muted">Followers</div>
                <div class="h5" id="followersCount">5.2342</div>
              </li>
              <li class="list-group-item">
                <div class="h6 text-muted">Following</div>
                <div class="h5" id="followingsCount">6758</div>
              </li>
              <li class="list-group-item" id="accountTypeHtml">private account</li>
            </ul>
          </div>
          <button style="width: 23vw;margin-top: 2vw;" type="button" id="followButton" onclick="followOrUnfollow()" class="btn btn-success">Follow</button>
        </div>
        <div class="col-md-6 gedf-main">

          <!--- \\\\\\\Post-->

          <!--- \\\\\\\Post-->
<div id="Tweets">

</div>



          <!-- Post /////-->
        </div>
        <div class="col-md-3">
          <div class="card gedf-card">
            <div class="card-body">
              <h5 class="card-title">Follower List</h5>
              <h6 class="card-subtitle mb-2 text-muted">These Persons are Following You</h6>
              <p class="card-text"  id="Followers">
               
              </p>
            </div>
          </div>
          <div class="card gedf-card">
            <div class="card-body">
              <h5 class="card-title">Following List</h5>
              <h6 class="card-subtitle mb-2 text-muted">You are Following These Persons</h6>
              <p class="card-text"  id="Followings">
               
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <style>

body {font-family: Arial, Helvetica, sans-serif;}


/* The popup form - hidden by default */
.form-popup {
  display: none;
  position: fixed;
  bottom: 0;
  right: 15px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

/* Add styles to the form container */
.form-container {
  max-width: 500px;
  padding: 10px;
  background-color: white;
}

/* Full-width input fields */
.form-container input[type=text]{
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}

/* When the inputs get focus, do something */
.form-container input[type=text]:focus{
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit/login button */
.form-container .btn {
  background-color: #4CAF50;
  color: white;
  padding: 6px 10px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:1px;
  opacity: 0.8;
}

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}

/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}


      body {
        background-color: #eeeeee;
      }

      .h7 {
        font-size: 0.8rem;
      }

      .gedf-wrapper {
        margin-top: 0.97rem;
      }

      @media (min-width: 992px) {
        .gedf-main {
          padding-left: 4rem;
          padding-right: 4rem;
        }
        .gedf-card {
          margin-bottom: 2.77rem;
        }
      }

      /*Reset Bootstrap*/
      .dropdown-toggle::after {
        content: none;
        display: none;
      }

      
    </style>
  </body>
</html>



<script>
  
  function capitalize(string) 
  {
    return string.charAt(0).toUpperCase() + string.slice(1);
  }
  
  function getUser() {
    var originalStr=window.location.href;
    userName = originalStr.substring(30);
    $.get(
      `http://localhost:5000/profile/'${userName}'/userDetails`,
      (data) => {
        var user_id=data[0].user_id;
        var username=data[0].username;
        var fullName=data[0].fullname;
        var accountType=data[0].account_Type;
        var accountDesc=data[0].account_Description;

        document.getElementById("userNameHtml").innerHTML=capitalize(username);
        document.getElementById("fullNameHtml").innerHTML=capitalize(fullName);
        document.getElementById("accountTypeHtml").innerHTML=capitalize(accountType);
        document.getElementById("accDescHtml").innerHTML=capitalize(accountDesc);
        
      //  document.getElementById("userNameHtml").innerHTML=capitalize(username);
      //  document.getElementById("userNameHtml").innerHTML=capitalize(username);

      }
    );

    }
  
  function getUserTweets(){

    var originalStr=window.location.href;
    userName = originalStr.substring(30);
    $.get(
      `http://localhost:5000/profile/'${userName}'/userDetails`,
      (data) => {
        var userID=data[0].user_id;
        var user=data;
      $.get(
      `http://localhost:5000/profile/'${userID}'/userTweets`,
      (data) => {
        displayUserTweets(user, data);
 
      }
     );
    }
    );

    }
  
  function displayUserTweets(user, Tweets){
    for(var i=0;i<Tweets.length;i++){
      var time=Tweets[i].timeStamp;
      var text=Tweets[i].tweetText;
      var tweet_id=Tweets[i].tweet_id;
      var nodeBefore=`
      <div class="card gedf-card"  id="nodeAfter${i}">
            <div class="card-header">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="mr-2">
                    <img
                      class="rounded-circle"
                      width="45"
                      src="https://picsum.photos/50/50"
                      alt=""
                    />
                  </div>
                  <div class="ml-2">
                    <div class="h5 m-0">${capitalize(user[0].username)}</div>
                    <div class="h7 text-muted">${capitalize(user[0].fullname)}</div>
                  </div>
                </div>
                <div>
                  <div class="dropdown">
                    <button
                      class="btn btn-link dropdown-toggle"
                      type="button"
                      id="gedf-drop1"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="fa fa-ellipsis-h"></i>
                    </button>
                    <div
                      class="dropdown-menu dropdown-menu-right"
                      aria-labelledby="gedf-drop1"
                    >
                      <div class="h6 dropdown-header">Configuration</div>
                      <a class="dropdown-item" href="#">delete</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-body" id="hashTags${i}">
              <div class="text-muted h7 mb-2">
                <i class="fa fa-clock-o"></i>${time}
              </div>

              <p class="card-text">
                ${text}
              </p>`
              var span=`
              <div id="span${i}">
              </div>`;

              var nodeAfter=`
              

              <!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Comment Here</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <form action=""  method="POST">
        <input
            type="text"
            id="commentText"
            placeholder="Type Your Comment Here..."
          />

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <input type="submit" class="btn btn-primary" onclick="comment(${tweet_id})" value="Comment"/>
      </form>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel1">Retweet Here</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <form action="/profile/storeRetweet" method="POST">
        <input
            type="text"
            id="retweetText"
            placeholder="Type Your Tweet Here..."
          />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <input type="submit" class="btn btn-primary" onclick="Retweet(${tweet_id})" value="Retweet"/>
      </form>
      </div>
    </div>
  </div>
</div>

            </div>
            <div class="card-footer">
              <a href="" class="card-link" onclick="like(${tweet_id})"
                ><i class="fa fa-gittip"></i> Like</a
              >
              <a href="" class="card-link" data-toggle="modal" data-target="#exampleModal"
              ><i class="fa fa-comment"></i> Comment</a>

              <a href="" class="card-link" data-toggle="modal" data-target="#exampleModal1"
                ><i class="fa fa-mail-forward"></i>Retweet</a
              >

            </div>
          </div>
          <!-- Post /////-->  `;

          document.getElementById("Tweets").innerHTML+=nodeBefore;
          
          var ht = "hashTags"+i;
          document.getElementById(ht).innerHTML+=span;
          
          var sp="span"+i;
          displayHashTagCollection(Tweets[i].tweet_id, sp);          
            
          var na = "nodeAfter"+i;
          document.getElementById(na).innerHTML+=nodeAfter;
    }
  };

  function displayHashTagCollection(tweet_id, sp){
    $.get(
      `http://localhost:5000/profile/'${tweet_id}'/tweetHashTagCollection`,
      (data) => {
        for(var i=0;i<data.length;i++){
          displayHashTag(data[i].hashTag_id, sp);
        }
    
      }

    );
    }
  
  function displayHashTag(hashTag_id, sp){
      $.get(
      `http://localhost:5000/profile/'${hashTag_id}'/tweetHashTag`,
      (data) => {

        var span=`<span class="badge badge-primary">${data[0].hashtag}</span>`;
        document.getElementById(sp).innerHTML+=span;
      
      }
    );


    };

  function getFollowers() {
    console.log("in get followers");
    var originalStr=window.location.href;
    userName = originalStr.substring(30);
    console.log(userName);
    $.get(
      `http://localhost:5000/profile/'${userName}'/userDetails`,
      (data) => {
        var userID=data[0].user_id;
        var user=data;
        $.get(
          `http://localhost:5000/profile/'${userID}'/getFollowers`,
          (data) => {
            document.getElementById("followersCount").innerHTML=data.length;
            document.getElementById("Followers").innerText="";
            if(data.length!=0){
              for(var i=0;i<data.length;i++){
                console.log("in loop display of follower");
                $.get(
                  `http://localhost:5000/profile/'${data[i].follower_user_id}'/getUserDetailsFromUID`,
                  (data) => {

                    follower=data;
                    displayUserFollower(follower);
                  }
                );
              }
          }
          }
        );
      }
    );
  }

  function displayUserFollower(follower){
      console.log("in display follower not null");
      
      var a = document.createElement('a');
      a.target = '_blank';
      a.href = `http://localhost:5000/profile/${follower[0].username}`;
      a.innerText = capitalize(follower[0].username);
      var li= document.createElement('li');
      li.appendChild(a);    
      var ul= document.createElement('ul');
      ul.appendChild(li);
  
      var container = document.getElementById('Followers');
      container.appendChild(ul);
      container.appendChild(document.createElement('br'));
  };

  function getFollowings() {
    var originalStr=window.location.href;
    userName = originalStr.substring(30);
    $.get(
      `http://localhost:5000/profile/'${userName}'/userDetails`,
      (data) => {
        var userID=data[0].user_id;
        var user=data;
        $.get(
          `http://localhost:5000/profile/'${userID}'/getFollowings`,
          (data) => {
            document.getElementById("followingsCount").innerHTML=data.length;
            for(var i=0;i<data.length;i++){
              console.log("in loop display of following");
              $.get(
                `http://localhost:5000/profile/'${data[i].following_user_id}'/getUserDetailsFromUID`,
                (data) => {

                  following=data;
                  displayUserFollowing(following);
                }
              );
            }
          }
        );
      }
    );
  }

  function displayUserFollowing(following){

    var a = document.createElement('a');
    a.target = '_blank';
    a.href = `http://localhost:5000/profile/${following[0].username}`;
    a.innerText = capitalize(following[0].username);
    var li= document.createElement('li');
    li.appendChild(a);
    var container = document.getElementById('Followings');
    container.appendChild(li);
    container.appendChild(document.createElement('br'));
  };

  function followOrUnfollow(){

var action = document.getElementById("followButton").innerText;
console.log(action);

var loggedInUserID=getCookie("uid");
console.log(loggedInUserID);

var originalStr=window.location.href;
profileUser = originalStr.substring(30);
console.log(profileUser);


$.get(
  `http://localhost:5000/profile/'${profileUser}'/userDetails`,
  (data) => {
    profileUserID=data[0].user_id;
    console.log(profileUserID);
    if(action.localeCompare("Follow")==0){
      console.log("goin to follw")
      $.get(
        `http://localhost:5000/profile/${loggedInUserID}/${profileUserID}/follow`,
        (data) => {
          document.getElementById("followButton").innerText="Unfollow";
        }
      );
    }
    else{
      console.log("goin to unfollw")
      $.get(
        `http://localhost:5000/profile/'${loggedInUserID}'/'${profileUserID}'/unfollow`,
        (data) => {
          document.getElementById("followButton").innerText="Follow";

        }
      );
    }
    getFollowers();

});


}

  function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(";");
  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];
    while (c.charAt(0) == " ") {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
  }

  function handleChatAndFollowButton(){

    var loggedInUserID=getCookie("uid");
    console.log(loggedInUserID);

    var originalStr=window.location.href;
    profileUser = originalStr.substring(30);
    var userID;
    console.log(profileUser);
    $.get(
      `http://localhost:5000/profile/'${userName}'/userDetails`,
      (data) => {
        userID=data[0].user_id;

        if(loggedInUserID==userID){
      document.getElementById("chatButtonID").disabled= true;      
      document.getElementById("followButton").disabled=true;
      }  else{

        $.get(
        `http://localhost:5000/profile/'${profileUser}'/userDetails`,
        (data) => {
          var userID=data[0].user_id;
          var user=data;
          $.get(
            `http://localhost:5000/profile/'${userID}'/getFollowers`,
            (data) => {
              
              for(var i=0;i<data.length;i++){
                if(loggedInUserID==data[i].follower_user_id){
                  document.getElementById("followButton").innerHTML="Unfollow";
                }  
              }
            }
          );
        }
      );

        }
      }
    );
  }

  function chat(){

    var originalStr=window.location.href;
    profileUser = originalStr.substring(30);
    var userID;
    console.log(profileUser);
    $.get(
      `http://localhost:5000/profile/'${profileUser}'/userDetails`,
      (data) => {
        userID=data[0].user_id;
        $.get(`http://localhost:5000/chat?chatWith='${userID}'`);
      } 
    );

  }

  function logout(){
    console.log("in logout");
    window.location.href = `http://localhost:5000/login`;

  }

  function home(){

    window.location.href = `http://localhost:5000/home`;

  }

  function like(tweet_id){
    var loggedInUserID=getCookie("uid");

    $.get(
      `http://localhost:5000/profile/'${loggedInUserID}'/'${tweet_id}'/like`,
      (data) => {
        

      }
    );

  }

  function comment(tweet_id){

    var loggedInUserID=getCookie("uid");

    var comment= document.getElementById("commentText").value;

    $.get(
      `http://localhost:5000/profile/'${loggedInUserID}'/'${tweet_id}'/'${comment}'/storeComment`,
      (data) => {
        

      }
    );
    }
  
  function Retweet(tweet_id){

      var loggedInUserID=getCookie("uid");

      var comment= document.getElementById("retweetText").value;

      $.get(
        `http://localhost:5000/profile/'${loggedInUserID}'/'${tweet_id}'/'${comment}'/storeRetweet`,
        (data) => {
          

        }
      );

  }

  function search(){

    var searchInput= document.getElementById("searchID").value;
    console.log(searchInput);

    $.get(
        `http://localhost:5000/profile/${searchInput}/search`,
        (data) => {
          console.log(data);
          if(data[0].user_id){
            console.log("users");
            window.location.href=`http://localhost:5000/profile/${data[0].username}`
          }else{
            console.log("going to display tweets");
            displaySearchTweets(data);
          }
        }
      );
  }

  function displaySearchTweets(data){
  
  var i=0;   
  var length=data.length;
  console.log(length);

var model=`
<button type="button" style="display: none;" id="longModalID" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalLong">
    </button>
    
    <!-- Modal -->
    <div class="modal fade" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body" id="longModalBody">
    
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
`;

document.getElementById("commentsModal").innerHTML=model;

//    for(var i=0;data.length;i++){
      while(i<length){
      console.log(i);
      var time=data[i].timeStamp;
      var text=data[i].tweetText;
      var tweet_id=data[i].tweet_id;

      var nodeBefore=`

      <div class="card gedf-card"  id="nodeAfterComments${i}">
            <div class="card-header">
              <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="mr-2">
                    <img
                      class="rounded-circle"
                      width="45"
                      src="https://picsum.photos/50/50"
                      alt=""
                    />
                  </div>
                  <div class="ml-2">
                    <div class="h5 m-0">${capitalize(data[i].username)}</div>
                    <div class="h7 text-muted">${capitalize(data[i].fullname)}</div>
                  </div>
                </div>
                <div>
                  <div class="dropdown">
                    <button
                      class="btn btn-link dropdown-toggle"
                      type="button"
                      id="gedf-drop1"
                      data-toggle="dropdown"
                      aria-haspopup="true"
                      aria-expanded="false"
                    >
                      <i class="fa fa-ellipsis-h"></i>
                    </button>
                    <div
                      class="dropdown-menu dropdown-menu-right"
                      aria-labelledby="gedf-drop1"
                    >
                      <div class="h6 dropdown-header">Configuration</div>
                      <a class="dropdown-item" href="#">delete</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-body" id="hashTagsComments${i}">
              <div class="text-muted h7 mb-2">
                <i class="fa fa-clock-o"></i>${time}
              </div>

              <p class="card-text">
                ${text}
              </p>`
              var span=`
              <div id="spanComments${i}">
              </div>`;

              var nodeAfter=`
              


              <!-- Modal -->
<div class="modal fade" id="exampleModalComments" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabelComments">Comment Here</h5>
        <button type="button" class="close" data-dismiss="modal" id="cm" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <form action=""  method="POST">
        <input
            type="text"
            id="commentText"
            placeholder="Type Your Comment Here..."
          />

      </div>
      <div class="modal-footer">

        <input type="submit" class="btn btn-primary" onclick="comment(${tweet_id})" value="Comment"/>
      </form>
      </div>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="exampleModal1Comments" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel1Comments" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel1Comments">Retweet Here</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
      <form action="/profile/storeRetweet" method="POST">
        <input
            type="text"
            id="retweetText"
            placeholder="Type Your Tweet Here..."
          />
      </div>
      <div class="modal-footer">
        <input type="submit" class="btn btn-primary" onclick="Retweet(${tweet_id})" value="Retweet"/>
      </form>
      </div>
    </div>
  </div>
</div>



            </div>
            <div class="card-footer">
              <a href="" class="card-link" onclick="like(${tweet_id})"
                ><i class="fa fa-gittip"></i> Like</a
              >
              <a href="" class="card-link" data-toggle="modal" data-target="#exampleModalComments"
              ><i class="fa fa-comment"></i> Comment</a>

              <a href="" class="card-link" data-toggle="modal" data-target="#exampleModal1Comments"
                ><i class="fa fa-mail-forward"></i>Retweet</a
              >

            </div>
          </div>
          <!-- Post /////-->  `;

          document.getElementById("longModalBody").innerHTML+=nodeBefore;
          
          var ht = "hashTagsComments"+i;
          document.getElementById(ht).innerHTML+=span;

          
          var sp="spanComments"+i;
          displayHashTagCollectionInSearch(data[i].tweet_id, sp);          
          console.log("span");
           console.log(sp); 
          
          
          var na = "nodeAfterComments"+i;
          document.getElementById(na).innerHTML+=nodeAfter;
          

          i++;
        }
    document.getElementById("longModalID").click();

  };

  function displayHashTagCollectionInSearch(tweet_id, sp){
    console.log("in display hash tag collection");
    console.log(sp);
    $.get(
      `http://localhost:5000/profile/'${tweet_id}'/tweetHashTagCollection`,
      (data) => {
        for(var i=0;i<data.length;i++){
          displayHashTagInSearch(data[i].hashTag_id, sp);
        }
    
      }

    );
    }
  
  function displayHashTagInSearch(hashTag_id, sp){
    console.log("in display hash tag");
    console.log(sp);  
    $.get(
      `http://localhost:5000/profile/'${hashTag_id}'/tweetHashTag`,
      (data) => {

        var span=`<span class="badge badge-primary">${data[0].hashtag}</span>`;
        document.getElementById(sp).innerHTML+=span;
      
      }
    );


    };


</script>

<script>

  $(document).ready(function(){
    getUser();
  })
  $(document).ready(function(){
    getUserTweets();
  })
  $(document).ready(function(){
    displayUserTweets();
  })
  $(document).ready(function(){
    getFollowers();
  })
  $(document).ready(function(){
    getFollowings();
  })
  $(document).ready(function(){
    handleChatAndFollowButton();
  })
</script>
